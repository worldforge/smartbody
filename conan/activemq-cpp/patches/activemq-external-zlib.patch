Index: activemq-cpp/activemq-cpp.spec
===================================================================
--- activemq-cpp/activemq-cpp.spec	(revision 1355046)
+++ activemq-cpp/activemq-cpp.spec	(working copy)
@@ -23,6 +23,7 @@
 BuildRequires:  apr-devel%{?_isa} >= 1.3
 BuildRequires:  cppunit-devel%{?_isa} >= 1.10.2
 BuildRequires:  openssl-devel%{?_isa} >= 0.98.0
+BuildRequires:  zlib-devel
 
 %description
 activemq-cpp is a JMS-like API for C++ for interfacing with Message
Index: activemq-cpp/src/main/decaf/util/zip/Adler32.cpp
===================================================================
--- activemq-cpp/src/main/decaf/util/zip/Adler32.cpp	(revision 1355046)
+++ activemq-cpp/src/main/decaf/util/zip/Adler32.cpp	(working copy)
@@ -17,7 +17,7 @@
 
 #include "Adler32.h"
 
-#include <decaf/internal/util/zip/zlib.h>
+#include <zlib.h>
 
 using namespace decaf;
 using namespace decaf::lang;
Index: activemq-cpp/src/main/decaf/util/zip/Inflater.cpp
===================================================================
--- activemq-cpp/src/main/decaf/util/zip/Inflater.cpp	(revision 1355046)
+++ activemq-cpp/src/main/decaf/util/zip/Inflater.cpp	(working copy)
@@ -20,7 +20,7 @@
 #include <stdio.h>
 #include <assert.h>
 
-#include <decaf/internal/util/zip/zlib.h>
+#include <zlib.h>
 
 #include <decaf/lang/exceptions/RuntimeException.h>
 
Index: activemq-cpp/src/main/decaf/util/zip/CRC32.cpp
===================================================================
--- activemq-cpp/src/main/decaf/util/zip/CRC32.cpp	(revision 1355046)
+++ activemq-cpp/src/main/decaf/util/zip/CRC32.cpp	(working copy)
@@ -17,7 +17,7 @@
 
 #include "CRC32.h"
 
-#include <decaf/internal/util/zip/zlib.h>
+#include <zlib.h>
 
 using namespace decaf;
 using namespace decaf::lang;
Index: activemq-cpp/src/main/decaf/util/zip/Deflater.cpp
===================================================================
--- activemq-cpp/src/main/decaf/util/zip/Deflater.cpp	(revision 1355046)
+++ activemq-cpp/src/main/decaf/util/zip/Deflater.cpp	(working copy)
@@ -20,7 +20,7 @@
 #include <stdio.h>
 #include <assert.h>
 
-#include <decaf/internal/util/zip/zlib.h>
+#include <zlib.h>
 #include <decaf/lang/exceptions/RuntimeException.h>
 
 using namespace decaf;
Index: activemq-cpp/src/main/Makefile.am
===================================================================
--- activemq-cpp/src/main/Makefile.am	(revision 1355046)
+++ activemq-cpp/src/main/Makefile.am	(working copy)
@@ -393,20 +393,6 @@
     decaf/internal/util/concurrent/Threading.cpp \
     decaf/internal/util/concurrent/unix/Atomics.cpp \
     decaf/internal/util/concurrent/unix/PlatformThread.cpp \
-    decaf/internal/util/zip/adler32.c \
-    decaf/internal/util/zip/crc32.c \
-    decaf/internal/util/zip/deflate.c \
-    decaf/internal/util/zip/gzclose.c \
-    decaf/internal/util/zip/gzlib.c \
-    decaf/internal/util/zip/gzread.c \
-    decaf/internal/util/zip/gzwrite.c \
-    decaf/internal/util/zip/infback.c \
-    decaf/internal/util/zip/inffast.c \
-    decaf/internal/util/zip/inflate.c \
-    decaf/internal/util/zip/inftrees.c \
-    decaf/internal/util/zip/trees.c \
-    decaf/internal/util/zip/uncompr.c \
-    decaf/internal/util/zip/zutil.c \
     decaf/io/BlockingByteArrayInputStream.cpp \
     decaf/io/BufferedInputStream.cpp \
     decaf/io/BufferedOutputStream.cpp \
@@ -1072,17 +1058,6 @@
     decaf/internal/util/concurrent/Transferer.h \
     decaf/internal/util/concurrent/unix/PlatformDefs.h \
     decaf/internal/util/concurrent/windows/PlatformDefs.h \
-    decaf/internal/util/zip/crc32.h \
-    decaf/internal/util/zip/deflate.h \
-    decaf/internal/util/zip/gzguts.h \
-    decaf/internal/util/zip/inffast.h \
-    decaf/internal/util/zip/inffixed.h \
-    decaf/internal/util/zip/inflate.h \
-    decaf/internal/util/zip/inftrees.h \
-    decaf/internal/util/zip/trees.h \
-    decaf/internal/util/zip/zconf.h \
-    decaf/internal/util/zip/zlib.h \
-    decaf/internal/util/zip/zutil.h \
     decaf/io/BlockingByteArrayInputStream.h \
     decaf/io/BufferedInputStream.h \
     decaf/io/BufferedOutputStream.h \
Index: activemq-cpp/configure.ac
===================================================================
--- activemq-cpp/configure.ac	(revision 1355046)
+++ activemq-cpp/configure.ac	(working copy)
@@ -270,7 +270,7 @@
    AMQ_CFLAGS="$PLAT_CXXFLAGS $DECAF_INCLUDES $DECAF_CXXFLAGS"
 fi

-AMQ_LIBS="$PLAT_LIBS $DECAF_LIBS"
+AMQ_LIBS="$PLAT_LIBS $DECAF_LIBS -lz"

 if test "$GCC" = "yes"; then
    AMQ_TEST_CXXFLAGS="$AMQ_CXXFLAGS $DECAF_INCLUDES $DECAF_CXXFLAGS -Wno-non-virtual-dtor -Wno-unused-parameter -Wno-uninitialized"
